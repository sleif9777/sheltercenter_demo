<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    {% load static %}
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet"  href="{%  static  'main.css'  %}">
  </head>
  <body>
    <div class="roleselector">
      <nav>
        <div class="roleselector-center">
          <ul>
            <li><a href="{% url 'calendar' 'admin' %}">Admin</a></li>
            <li><a href="{% url 'select_adopter' %}">Adopter</a></li>
            <li><a href="{% url 'calendar' 'greeter' %}">Greeter</a> </li>
          </ul>
        </div>
      </nav>
    </div>
    <div class="activitymenu">
      <nav>
        <div class="actmenu-center">
          <ul>
            <li><a href="{% url 'weekly_schedule' %}">Edit Weekly Template</a></li>
            <li><a href="{% url 'calendar' 'admin' %}">Calendar</a></li>
            <li><a href="{% url 'add_adopter' %}">Add Adopters</a></li>
            <li><a href="{% url 'daily_reports_home' 'admin' %}">Daily Report</a></li>
            <li><a href="{% url 'chosen_board' role %}">Chosen Board</a></li>
          </ul>
        </div>
      </nav>
    </div>

    <div class="calendar_header">
      <h1><a href="{% url 'calendar_date' role previous_day.year previous_day.month previous_day.day %}">&#9664;</a>  {{date_pretty}}  <a href="{% url 'calendar_date' role next_day.year next_day.month next_day.day %}">&#9654;</a></h1>
    </div>

    <div class="calendar_actions">
      <a href="{% url 'jump_to_date_admin' role %}">Jump To Date</a>
      <a href="{% url 'calendar' 'admin' %}">Return to Today</a>
      <a href="{% url 'add_timeslot' role date.year date.month date.day %}">Add Timeslot</a>
    </div>

    {% if empty_day == True %}
      <div class="copy_template_button">
        <br>
        <form class="" action="{% url 'copy_temp_to_cal' role date.year date.month date.day %}" method="post">
          {% csrf_token %}
          <input class="copytemplate" type="submit" name="" value="Copy From My {{weekday}} Template">
        </form>
      </div>

    {% else %}

    {% for timeslot, appointments in timeslots.items %}
      <div class="timeslot">
        <h2 class="timeslotheader">{{timeslot}}</h2>
        {% for appt in appointments %}
          <div class="appointment">
            <div class="appt_description appt_action">
              <p><a href="{% url 'edit_cal_appointment' role appt.id date.year date.month date.day %}">{{appt}}</a></p>
            </div>
            <div class="appt_notes">
              <em>
              {% if appt.internal_notes %}
                <a href="{% url 'edit_cal_appointment' role appt.id date.year date.month date.day %}"><b>Internal notes:</b> {{appt.internal_notes}}</a><br>
              {% endif %}
              {% if appt.adopter_notes %}
                <b>Adopter notes:</b> {{appt.adopter_notes}}<br></a>
              {% endif %}
              {% if appt.bringing_dog %}
                <b>Bringing dog</b>
              {% endif %}
              {% if appt.adopter_choice.visits_to_date > 1 %}
                <b>{{appt.adopter_choice.number_of_visits}}</b>
              {% endif %}
              </em>
            </div>
            {% if appt.appt_type in schedulable and appt.available == False %}
              <div class="appt_action">
                <a href="{% url 'edit_cal_appointment' role appt.id date.year date.month date.day %}">Edit Appointment Notes</a><br>
                {% if appt.outcome == "1" %}
                  <a href="{% url 'enter_decision' role appt.id date.year date.month date.day%}">Enter Decision</a>
                {% else %}
                  {% if appt.outcome == "5" %}
                    <a href="#" class="decision"></a>{{appt.get_outcome_display}}
                  {% else %}
                    <a href="{% url 'enter_decision' role appt.id date.year date.month date.day%}">{{appt.get_outcome_display}}: {{appt.dog}}</a>
                  {% endif %}
                {% endif %}
                <a href="{% url 'greeter_reschedule' role appt.adopter_choice.id appt.id date.year date.month date.day%}">Reschedule Adopter</a>
                <a href="{% url 'remove_adopter' role appt.id date.year date.month date.day %}">Cancel Adopter</a><br>
              </div>
              <div class="contact_adopter">
                <div class="contact_adopter_header">
                  <a href="{% url 'contact_adopter' appt.id date.year date.month date.day %}">Contact Adopter</a>
                </div>
                <div class="contact_adopter_quickbuttons">
                  {% if appt.comm_adopted_dogs == False %}
                    <a href="{% url 'dogs_were_adopted' appt.id %}" class="contact_adopter_quickbutton_links">Dogs Were Adopted</a>
                  {% else %}
                    <a href="#" class="completed_appt_action">Dogs Were Adopted</a>
                  {% endif %}

                  {% if appt.comm_limited_puppies == False %}
                    <a href="{% url 'limited_matches' appt.id 'puppies' date.year date.month date.day %}" class="contact_adopter_quickbutton_links">Limited Puppies</a>
                  {% else %}
                    <a href="#" class="completed_appt_action">Limited Puppies</a>
                  {% endif %}

                  {% if appt.comm_limited_small == False %}
                    <a href="{% url 'limited_matches' appt.id 'small dogs' date.year date.month date.day %}" class="contact_adopter_quickbutton_links">Limited Small Dogs</a>
                  {% else %}
                    <a href="#" class="completed_appt_action">Limited Small Dogs</a>
                  {% endif %}

                  {% if appt.comm_limited_hypo == False %}
                    <a href="{% url 'limited_matches' appt.id 'lowshed' date.year date.month date.day %}" class="contact_adopter_quickbutton_links">Limited Low-Shed/Hypo</a>
                  {% else %}
                    <a href="#" class="completed_appt_action">Limited Low-Shed/Hypo</a>
                  {% endif %}

                  {% if appt.comm_limited_other == False %}
                    <a href="{% url 'limited_matches' appt.id 'other' date.year date.month date.day %}" class="contact_adopter_quickbutton_links">Other</a>
                  {% else %}
                    <a href="#" class="completed_appt_action">Other</a>
                  {% endif %}
                </div>
              </div>
            {% endif %}
            <div class="delete_appt appt_action">
              <a href="{% url 'edit_cal_appointment' role appt.id date.year date.month date.day %}">Edit Appointment</a>
              <a href="{% url 'delete_cal_appointment' role appt.id date.year date.month date.day %}">Delete Appointment</a>
            </div>
          </div>
        {% endfor %}
        <br>
        <a class="timeslot_action" href="{% url 'add_cal_appointment' role timeslot.id date.year date.month date.day %}">Add Appointment</a>
        <a class="timeslot_action" href="{% url 'delete_cal_timeslot' role timeslot.id date.year date.month date.day %}">Delete Timeslot</a>
      </div>
    {% endfor %}
    <br>
    {% endif %}

  </body>
</html>
