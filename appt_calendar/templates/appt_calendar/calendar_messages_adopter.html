<div class="adopter-messages">
  <p class="greeting"><b>Hello, {{request.user.adopter.f_name}}!</b></p><br>

  {% if request.user.adopter.waiting_for_chosen %}
  <div class="info-box calendar-notes">
    <table>
      <tr>
        <td class="info-box-data no-border">
          <span class="alert-symbol">&#9432;&#xFE0E; </span>Congratulations on choosing a Saving Grace dog! We will let you know as soon as they are ready to come home with you.
        </td>
      </tr>
    </table>
  </div>
  {% elif request.user.adopter.adoption_complete %}
  <div class="info-box calendar-notes">
    <table>
      <tr>
        <td class="info-box-data no-border">
          <span class="alert-symbol">&#9432;&#xFE0E; </span>
          {% if request.user.adopter.requested_access %}
          <span class="larger-font btm-margin-10">Congratulations on adopting a Saving Grace dog!</span>
          We have your received your request to schedule a new appointment.
          {% elif request.user.adopter.requested_surrender %}
          <span class="btm-margin-10">
            We have your received your request to surrender your Saving Grace dog. An adoptions manager will be in touch with you for follow-up soon<br>
          </span> 
          Please do not come to Saving Grace until a set time and date have been determined. We need to ensure we have sufficient space and resources for your dog to begin the re-acclimation process. As a result, we cannot accept any walk-in surrenders. You MUST have a scheduled appointment.
          {% else %}
          <span class="larger-font btm-margin-10">Congratulations on adopting a Saving Grace dog!</span>
          If you would like to adopt again, <a href="{% url 'request_access' request.user.adopter.id %}" class="standalone">click here to request access to calendar appointments. </a><br>
          If you are seeking to surrender your Saving Grace dog, <a href="{% url 'surrender_form' request.user.adopter.id %}" class="standalone">click here to begin the process. </a>
          {% endif %}
        </td>
      </tr>
    </table>
  </div> 
  {% else %}
    {% if request.user.adopter.has_current_appt %}
    Your appointment is currently set for {{current_appt_str}}.<br>
      {% if visible == True %}
      Click any open slot below to reschedule your appointment. We only book one appointment per adopter at a time. By booking any appointment below, you will forfeit your current appointment slot. <br>
      {% endif %}
    {% else %}
    You do not currently have an appointment. Click any open slot below to schedule your appointment, or select another date using the &#9664;&#xFE0E; and &#9654;&#xFE0E; symbols at the top of the page.
    {% endif %}

    <table id="calendar-messages">
      <tr>
        {% if request.user.adopter.has_current_appt %}
        <td class="no-border half-width">
          {% include 'appt_calendar/appointment_adopter_cal_msg.html' %}
        </td>
        {% endif %}
        <td class="left no-border half-width">
          <div class="info-box calendar-notes">
            <table>
              {% if calendar_announcement.text != "" %}
              <tr>
                <td class="info-box-data">
                  <span class="alert-symbol">&#9432;&#xFE0E; </span>{{calendar_announcement.text|safe}}
                </td>
              </tr>
              {% endif %}
              {% if daily_announcement %}
              <tr>
                <td class="info-box-data no-border">
                  <span class="alert-symbol">&#9432;&#xFE0E; </span>{{daily_announcement.text|safe}}
                </td>
              </tr>
              {% endif %}
              {% if offsite_dogs %}
              <tr>
                <td class="info-box-data no-border">
                  <span class="alert-symbol">&#9432;&#xFE0E; </span> The following dogs are currently in foster and require pre-arranged appointments. Please click a name below to begin coordinating with us. Do not book an appointment below.
                  <ul>
                    {% for dog in offsite_dogs %}
                    {% if dog.appt_only %}
                    <li><a href="{% url 'contact_us' dog.name %}">{{dog.name}}</a></li>
                    {% endif %}
                    {% endfor %}
                  </ul>
                </td>
              </tr>
              <tr>
                <td class="info-box-data no-border">
                  <span class="alert-symbol">&#9432;&#xFE0E; </span> The following dogs are currently on an Extended Host Weekend or are returning from Foster soon. Please keep these dates in mind if looking to meet one of them:
                  <ul>
                    {% for dog in offsite_dogs %}
                    {% if not dog.appt_only %}
                    <li>
                      {{dog.name}}
                      {% if dog.host_date.year > 2000 %}
                      , returning {{dog.host_date}}
                      {% elif dog.foster_date.year > 2000 %}
                      , returning {{dog.foster_date}}
                      {% endif %}
                    </li>
                    {% endif %}
                    {% endfor %}
                  </ul>
                </td>
              </tr>
              {% endif %}
              {% if date.weekday == 5 or date.weekday == 6 %}
              <tr>
                <td class="info-box-data no-border">
                  <span class="alert-symbol">&#9432;&#xFE0E; </span>We are not open on weekends.
                </td>
              </tr>
              {% endif %}
              {% if visible == False or empty_day_db %}
                {% if date.weekday < 5 and delta > 13 %}
                <tr>
                  <td class="info-box-data no-border">
                    <span class="alert-symbol">&#9432;&#xFE0E; </span>We only schedule two weeks in advance, and are not scheduling for this date yet.
                    {% if request.user.adopter.alert_date == date %}
                      We will alert you when appointments for this date are open.
                    {% else %}
                      <a href="{% url 'set_alert_date' date.year date.month date.day %}">Click here to be alerted when we have opened appointments for this date.</a>
                    {% endif %}
                  </td>
                </tr>
                {% endif %}
              {% elif empty_day == True and date.weekday < 5 %}
                <tr>
                  <td class="info-box-data no-border">
                    <span class="alert-symbol">&#9432;&#xFE0E; </span>We're sorry, this date is fully booked. To see more available appointments, please select another date using the &#9664;&#xFE0E; and &#9654;&#xFE0E; symbols at the top of the page.
                  </td>
                </tr>
              {% endif %}
            </table>
          </div>
        </td>
      </tr>
    </table>
  {% endif %}
</div>